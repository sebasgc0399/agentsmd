# AGENTS.md

## Propósito del repositorio
{{project_description}}

Este es un monorepo que contiene múltiples paquetes y aplicaciones.

## Tech stack
{{#stacks}}
- {{.}}
{{/stacks}}

## Estructura del monorepo
```
.
├── apps/         # Aplicaciones deployables
└── packages/     # Paquetes compartidos/librerías
```

## Comandos canónicos
- Instalar dependencias: `{{commands.install}}`
{{#has_dev}}
- Ejecutar todos los dev servers: `{{commands.dev}}`
{{/has_dev}}
{{#has_build}}
- Build todos los paquetes: `{{commands.build}}`
{{/has_build}}
{{#has_lint}}
- Lint todo el monorepo: `{{commands.lint}}`
{{/has_lint}}
{{#has_tests}}
- Tests de todo el monorepo: `{{commands.test}}`
{{/has_tests}}

### Comandos específicos de workspace
```bash
# Ejecutar comando en un workspace específico
npm run dev --workspace=apps/web
pnpm --filter @myorg/api dev
yarn workspace @myorg/shared test
```

## Definition of Done
Antes de considerar una tarea completa:
{{#has_tests}}
- [ ] `{{commands.test}}` pasa en todos los paquetes afectados
{{/has_tests}}
{{#has_lint}}
- [ ] `{{commands.lint}}` pasa sin errores
{{/has_lint}}
{{#has_build}}
- [ ] `{{commands.build}}` completa sin errores
{{/has_build}}
- [ ] Cambios en packages/ no rompen apps/ que dependen de ellos
- [ ] Versiones de dependencias sincronizadas (usar workspaces)
- [ ] No añadir dependencias nuevas sin confirmación

## Estilo y convenciones
{{style_notes}}

### Organización de código
- **apps/**: Aplicaciones completas (web, mobile, admin)
- **packages/**: Librerías compartidas, configuraciones, utilidades
- Naming: `@org/package-name` para scoped packages

### Dependencias
- Dependencias compartidas declaradas en root package.json
- Dependencias específicas en cada workspace
- Usar workspaces protocol para dependencias internas: `"@myorg/shared": "workspace:*"`

{{#has_tests}}
## Testing guidelines
{{testing_notes}}

### Estrategia de testing en monorepo
- Tests unitarios en cada package
- Tests de integración para apps que consumen packages
- Usar cache de tests para evitar re-ejecutar tests innecesarios
{{/has_tests}}

## Seguridad
{{security_notes}}

### Monorepo-specific
- Revisar todas las dependencias transitivas (usar `npm audit` o `pnpm audit`)
- Lockfile sincronizado en root (yarn.lock, pnpm-lock.yaml)
- No exponer secrets entre workspaces innecesariamente

## Build y Deploy
- Build incremental: solo rebuilds paquetes modificados
- Topological ordering: packages se buildan en orden de dependencias
- Cache de builds para optimizar CI/CD

---
*Generated by agents-md v1.0.0*
